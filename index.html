<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Socket.IO with JWT Authentication</title>
</head>
<body>
<h1>Socket.IO with JWT Authentication</h1>
<textarea style="width: 300px; height: 300px"></textarea>
<input id="id" onchange="a()">
<br>
<button onclick="sendMessage()">Send message</button>

<!-- Imports Socket.IO client library from CDN. Pay attention, the
    version of the client lib must match the version of the NPM package
    `socket.io` that is used in the Node.js backend. -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.0/socket.io.min.js"></script>
<script>
    // Initiates the Socket.IO connection to the Node.js backend
    const socket = io.connect('http://127.0.0.1:5000/remote', {
        extraHeaders: {
            Authorization: 'Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiIxOTc4MiIsImp0aSI6IjEwZjcwYzZjMzQ1ZTU3ZGQ5MDg1ZjU0ZTRmNzAzMjA4OGYzN2NlZTZlMjEzMjU1NDE4OGYxNzQzNTY0ODA3YTE0YTBmZGEwYjY3MTkzY2ZiIiwiaWF0IjoxNjczNTM1MTAxLjY2MzE4NCwibmJmIjoxNjczNTM1MTAxLjY2MzE4NywiZXhwIjoxNjczNjIxNTAxLjY1MTc3MSwic3ViIjoiMjIzMzk2NTciLCJzY29wZXMiOlsiaWRlbnRpZnkiXX0.ETG7bcr01r7od1_DFQMVAqTDzdiZ5cjWwnyKVAD63WHoqPj0bigL7LpEn3URfv2poP2H2BAodAmlsNvkUB5CoHThl7_jcLRw6Jw4aRkX5NfmdX0h2uweWvEr4pPlg0GkpRYS66AWFG8BIZ9OWmyYT3fRACDC-SvIGOUJYXxkjlHefpEH3suKmSTIfbX08QNjrlOF6myInTH--FetPcs70IM-xU2YM0iVTFelj6I2hYYTQS-BnzsjX7F47v6Ivnc05XXkKfnpKf_vpZxxoGlF71vBzMO64t-2rlHfMuzI5nvMNCRCp-PTAV2GooNbn8lK0a-fI4pWx_Hgz3yZZjLr72GxeikW3agV_1_POAgfneezHzw2avrkLWUxSbjugO1HLLl9bQtpAmG012eUI8ZN-VOxXkimSEo2pIOX-RZ9AckUpVhSlawrhcIDxgZEBiFJQmdD5AM4ldyuNbAiOc2HSJ3qwoiWOYEUBFGvS620NgtN8XZvL4BGHS9GFKgCCISAxVa2Vgc2FQBRdXgHrEKHRwnD1ETF2NtWkKe3LXdahcf17KckZUIiXHwCnHgX1pUmiqtBfxyu2BwC5zx1SDAzE2i-xCoHH7w66CHnba0aXOvaS81pmIYnO9x-WXzPQtXLUtOiLWA0z0HJAY1YUzr4F2DThtVxafz8jnD7PdKAwDk'
        }
    });

    socket.on('connect', () => {
        log('Connected to server');
    });

    socket.on('diconnect', () => {
        log('Disconnected from server');
    });

    socket.on('command', console.info)

    function log(message) {
        document.getElementsByTagName('textarea')[0].value = document.getElementsByTagName('textarea')[0].value + '\n' + message;
    }

    /**
     * Emits a `message` event with the payload `Hello, world` which
     * is send via the WebSocket connection to the Node.js backend.
     */
    function sendMessage() {
        socket.emit('message', 'Hello, world');
    }

    function a() {

        socket.emit('command', {
            type: 'PLAY',
            target: id.value
        }, () => {})
    }
</script>
</body>
</html>
</html>
